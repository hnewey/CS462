ruleset track_trips {
	meta {
	}

	rule process_trips {
		select when car new_trip mileage re#^[+]?([.]\d+|\d+([.]\d+)?)$#
    pre {
      mileage = event:attr("mileage").defaultsTo("0");
    }
    send_directive("trip") with
				trip_length = mileage

		select when explicit trip_processed
		pre {
			attrs = event:attrs()
		}
		send_directive("explicit") with
				trip_length = attrs
	}

	rule find_long_trips {
		
	}
}
