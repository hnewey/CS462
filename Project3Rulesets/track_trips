ruleset track_trips {
	meta {
	}

	rule process_trips {
		select when car new_trip mileage re#^[+]?([.]\d+|\d+([.]\d+)?)$#
    pre {
      mileage = event:attr("mileage").defaultsTo("0");
    }
    send_directive("trip") with
				trip_length = mileage
		fired {
		}
			raise explicit event "trip_processed"
				attributes { "attrs": event:attrs()}
	}

	rule find_long_trips {
		
	}
}
